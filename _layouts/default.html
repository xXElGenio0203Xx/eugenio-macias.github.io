<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ page.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Base CSS + Fonts -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/cascadia-code">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <!-- Layout + Effects -->
  <style>
    :root{
      /* Colors (dark-first) */
      --bg:#07080b;
      --ink:#e6e8ee;
      --muted:#a7adbb;
      --line:#21242c;
      --card:#0c0f14;
      --accent1:#7c83ff;
      --accent2:#22d3ee;
      --accent3:#34d399;

      /* FX */
      --ring: conic-gradient(from 180deg, var(--accent1), var(--accent2), var(--accent3), var(--accent1));
      --shadow-1: 0 10px 30px rgba(0,0,0,.35);
      --shadow-2: 0 24px 60px rgba(0,0,0,.55);
      --blur: blur(10px);

      /* Dock */
      --dock-h: 78px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f9fafb;
        --ink:#0f172a;
        --muted:#475569;
        --line:#e5e7eb;
        --card:#ffffff;
        --shadow-1: 0 14px 34px rgba(0,0,0,.08);
        --shadow-2: 0 34px 60px rgba(0,0,0,.12);
      }
    }

    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 10% -10%, rgba(124,131,255,.08), transparent 60%),
        radial-gradient(1000px 700px at 110% 10%, rgba(34,211,238,.08), transparent 60%),
        var(--bg);
      color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      overflow-x:hidden;
    }

    /* ===== Header (sticky glass) ===== */
    header{
      position:sticky; top:0; z-index:50;
      display:grid; grid-template-columns:1fr auto 1fr; align-items:center;
      gap:12px; padding:12px clamp(12px, 3vw, 24px);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
      backdrop-filter: blur(12px);
      border-bottom:1px solid var(--line);
      box-shadow: var(--shadow-1);
    }
    header::after{
      content:""; position:absolute; inset:0 0 auto 0; height:2px; pointer-events:none;
      background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3));
      opacity:.55; transform-origin:left center; transform: scaleX(0);
      transition: transform 1.1s ease;
    }
    body.scrolled header::after{ transform: scaleX(1); }

    .header-links-left, .header-links-right{ display:flex; gap:12px; align-items:center; }

    header h1{
      margin:0; font-weight:900; letter-spacing:.4px;
      font-family: "Cascadia Code", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: clamp(16px, 2vw, 20px);
      background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      filter: drop-shadow(0 4px 12px rgba(0,0,0,.15));
    }

    /* Header icons â€” bright neon + magnetic */
    header a{
      --s: 40px;
      width:var(--s); height:var(--s); display:grid; place-items:center;
      border-radius:12px; text-decoration:none; color:#fff;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border:1px solid var(--line);
      transition: transform .22s ease, border-color .22s ease, box-shadow .22s ease, background .22s ease, filter .22s ease;
      position:relative; overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    header a i{
      font-size:18px; color:#fff;
      text-shadow:
        0 0 6px rgba(255,255,255,.55),
        0 0 14px rgba(124,131,255,.6),
        0 0 26px rgba(34,211,238,.45);
      filter: brightness(1.05) saturate(1.15);
      transition: transform .22s ease, filter .22s ease, text-shadow .22s ease;
    }
    header a:hover{
      transform: translateY(-2px) scale(1.05) rotateX(1deg);
      border-color: transparent;
      box-shadow: 0 12px 30px rgba(0,0,0,.38), 0 0 0 1px rgba(124,131,255,.22);
      background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.08));
      filter: saturate(1.2);
    }
    header a:hover i{
      transform: translateY(-1px) scale(1.1);
      text-shadow:
        0 0 10px rgba(255,255,255,.8),
        0 0 22px rgba(124,131,255,.9),
        0 0 36px rgba(34,211,238,.85);
      filter: brightness(1.22) saturate(1.25);
    }
    header a::after{
      content:""; position:absolute; inset:0;
      background: radial-gradient(140px 140px at var(--mx,50%) var(--my,50%), rgba(124,131,255,.26), transparent 60%);
      opacity:0; transition: opacity .22s ease;
    }
    header a:hover::after{ opacity:1; }

    /* ===== Page Transition Overlay ===== */
    .page-transition{
      position:fixed; inset:0; z-index:100;
      pointer-events:none; opacity:0;
      transform: scale(1);
      transition: opacity .7s ease, transform .7s ease;
    }
    .page-transition::before{
      content:""; position:absolute; inset:0;
      background: radial-gradient(180px 180px at var(--x, 50%) var(--y, 50%),
                   rgba(124,131,255,.7), rgba(34,211,238,.6), transparent 70%);
      filter: blur(20px) saturate(130%);
      clip-path: circle(0% at var(--x,50%) var(--y,50%));
    }
    .page-transition::after{
      content:""; position:absolute; inset:-10%;
      background:
        conic-gradient(from 180deg at 50% 50%,
          rgba(124,131,255,.22),
          rgba(34,211,238,.22),
          rgba(52,211,153,.22),
          transparent 60%);
      filter: blur(30px) saturate(140%);
      opacity:0; transform: rotate(0deg) scale(1);
    }
    .page-transition > .scan{
      position:absolute; inset:0; pointer-events:none; opacity:0;
      background: repeating-linear-gradient(to bottom, rgba(255,255,255,.06) 0 1px, transparent 1px 5px);
    }
    .page-transition.page-transition-active{
      pointer-events:auto; opacity:1; transform: scale(1.06);
    }
    .page-transition.page-transition-active::before{ animation: warpCircle 1.15s ease forwards; }
    .page-transition.page-transition-active::after{ animation: prismSweep 1.15s ease forwards; }
    .page-transition.page-transition-active > .scan{ animation: scanFade 1.15s ease forwards; }

    @keyframes warpCircle{
      0%{ clip-path: circle(0% at var(--x,50%) var(--y,50%)); }
      60%{ clip-path: circle(130% at var(--x,50%) var(--y,50%)); }
      100%{ clip-path: circle(180% at var(--x,50%) var(--y,50%)); }
    }
    @keyframes prismSweep{
      0%{ opacity:0; transform: rotate(0deg) scale(1); }
      40%{ opacity:.75; transform: rotate(18deg) scale(1.06); }
      100%{ opacity:0; transform: rotate(28deg) scale(1.14); }
    }
    @keyframes scanFade{ 0%{opacity:0;} 30%{opacity:.35;} 100%{opacity:0;} }

    /* ===== Scroll progress ===== */
    .scroll-progress{
      position:fixed; top:0; left:0; height:3px; width:0%;
      background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3));
      z-index:120; box-shadow: 0 0 16px rgba(124,131,255,.45);
      transition: width .1s linear;
    }

    /* ===== Main content reveal & exit ===== */
    #content{
      opacity:0; transform: translateY(6px);
      transition: opacity .65s ease, transform .65s ease, filter .65s ease;
      will-change: opacity, transform, filter;
      min-height: calc(100vh - 160px);
      /* Make room for fixed dock */
      padding-bottom: calc(var(--dock-h) + env(safe-area-inset-bottom) + 16px);
    }
    #content.visible{ opacity:1; transform: translateY(0); }
    #content.leaving{
      filter: blur(8px) saturate(115%);
      opacity:.12;
      transform: scale(.982) translateY(10px);
      transition: filter .7s ease, opacity .7s ease, transform .7s ease;
    }

    /* ===== Floating Dock Footer (always visible) ===== */
    footer{
      position: fixed; left: 0; right: 0;
      bottom: max(0px, env(safe-area-inset-bottom));
      z-index: 90;
      height: var(--dock-h);
      display: grid; place-items: center;
      padding: 0 clamp(10px, 4vw, 24px);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      backdrop-filter: blur(12px) saturate(120%);
      border-top: 1px solid var(--line);
      box-shadow: 0 -18px 48px rgba(0,0,0,.4), inset 0 1px 0 rgba(255,255,255,.06);
      overflow:hidden;
    }
    footer::before{
      content:""; position:absolute; inset:-40% -10%;
      background:
        radial-gradient(40% 30% at 25% 60%, rgba(124,131,255,.18), transparent 60%),
        radial-gradient(30% 30% at 80% 40%, rgba(34,211,238,.18), transparent 60%);
      filter: blur(44px) saturate(130%);
      pointer-events:none;
    }
    footer ul{
      list-style:none; margin:0; padding:0;
      display:flex; gap:10px; flex-wrap:nowrap;
      overflow:auto hidden; scrollbar-width: none;
    }
    footer ul::-webkit-scrollbar{ display:none; }

    /* ===== HYPERFLUX BUTTONS (insane background) ===== */
    footer li a{
      --mx:50%; --my:50%;
      --c1:#7c83ff; --c2:#22d3ee; --c3:#34d399;
      position:relative;
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px; padding:10px 16px; min-width: max(120px, 11ch);
      color:#fff; text-decoration:none; font-weight:900; letter-spacing:.2px;
      border-radius:16px; border:1px solid rgba(255,255,255,.14);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08), 0 10px 28px rgba(0,0,0,.35);
      isolation:isolate; /* keep inner glows contained */
      overflow:hidden;
      transform: translateZ(0); /* gpu hint */
      will-change: transform, filter;
    }
    /* per-tab palettes (cycled) */
    #footerNav li:nth-child(1) a{ --c1:#7c83ff; --c2:#22d3ee; --c3:#34d399; }
    #footerNav li:nth-child(2) a{ --c1:#34d399; --c2:#7c83ff; --c3:#22d3ee; }
    #footerNav li:nth-child(3) a{ --c1:#22d3ee; --c2:#34d399; --c3:#7c83ff; }
    #footerNav li:nth-child(4) a{ --c1:#a78bfa; --c2:#60a5fa; --c3:#22d3ee; }
    #footerNav li:nth-child(5) a{ --c1:#fb7185; --c2:#f59e0b; --c3:#34d399; }
    #footerNav li:nth-child(6) a{ --c1:#f472b6; --c2:#7c83ff; --c3:#22d3ee; }

    /* TEXT glow */
    footer li a span.label{
      position:relative; z-index:5;
      text-shadow:
        0 0 6px rgba(255,255,255,.6),
        0 0 16px rgba(124,131,255,.55),
        0 0 26px rgba(34,211,238,.45);
    }

    /* base rainbow motion */
    footer li a .rainbow{
      position:absolute; inset:-40% -10%;
      background: conic-gradient(from 0deg at 50% 50%, var(--c1), var(--c2), var(--c3), var(--c1));
      animation: spin 9s linear infinite;
      filter: blur(26px) saturate(140%);
      opacity:.35;
      z-index:0;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    /* liquid flux blobs */
    footer li a .flux{
      position:absolute; inset:-20% -10%;
      background:
        radial-gradient(130% 200% at 0% 50%, var(--c1) 0%, transparent 60%),
        radial-gradient(130% 200% at 100% 50%, var(--c2) 0%, transparent 60%),
        radial-gradient(160% 240% at 50% 120%, var(--c3) 0%, transparent 60%);
      background-size: 200% 200%, 200% 200%, 200% 200%;
      background-position: 0% 50%, 100% 50%, 50% 100%;
      filter: blur(20px) saturate(200%);
      mix-blend-mode: screen;
      opacity:.85;
      animation: fluxShift 6.6s ease-in-out infinite alternate;
      z-index:1;
    }
    @keyframes fluxShift{
      0%  { background-position: 0% 50%, 100% 50%, 50% 100%; transform: scale(1); }
      50% { background-position: 50% 0%, 50% 100%, 0% 50%;   transform: scale(1.02); }
      100%{ background-position: 100% 50%, 0% 50%, 50% 0%;  transform: scale(1.04); }
    }

    /* starry sparkles */
    footer li a .sparks{
      position:absolute; inset:-1px; border-radius:inherit; pointer-events:none;
      background:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.9) 0 60%, transparent 70%),
        radial-gradient(1.8px 1.8px at 70% 60%, rgba(255,255,255,.8) 0 60%, transparent 70%),
        radial-gradient(1.6px 1.6px at 40% 80%, rgba(255,255,255,.85) 0 60%, transparent 70%),
        radial-gradient(1.6px 1.6px at 85% 25%, rgba(255,255,255,.9) 0 60%, transparent 70%);
      filter: drop-shadow(0 0 6px rgba(255,255,255,.8));
      opacity:.75;
      mix-blend-mode: screen;
      animation: twinkle 2.2s ease-in-out infinite alternate;
      z-index:3;
    }
    @keyframes twinkle{
      0% { transform: translate3d(0,0,0) scale(1); opacity:.55; }
      100%{ transform: translate3d(1px,-1px,0) scale(1.06); opacity:.95; }
    }

    /* glossy sweep + scan overlays */
    footer li a .sheen{
      position:absolute; top:0; left:-50%; width:40%; height:100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.24), transparent);
      transform: skewX(-20deg);
      opacity:0; pointer-events:none; z-index:4;
    }
    footer li a .scan{
      position:absolute; inset:1px; border-radius:14px; pointer-events:none;
      background: repeating-linear-gradient(to bottom, rgba(255,255,255,.12) 0 1px, transparent 1px 6px);
      opacity: 0; transition: opacity .25s ease; z-index:2;
    }

    /* edge glow ring */
    footer li a::before{
      content:""; position:absolute; inset:-2px; border-radius:18px; pointer-events:none;
      background: var(--ring); filter: blur(14px); opacity:.2; mix-blend-mode: screen;
      z-index:2;
    }
    /* magnetic inner glow (follows cursor) */
    footer li a::after{
      content:""; position:absolute; inset:0; pointer-events:none; opacity:0;
      background: radial-gradient(160px 160px at var(--mx) var(--my), rgba(255,255,255,.22), transparent 60%);
      transition: opacity .25s ease; z-index:2;
    }

    /* Hovers = louder + faster + hue shift */
    footer li a:hover{
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 18px 44px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.18);
      border-color: transparent; filter: saturate(1.25) brightness(1.07) hue-rotate(8deg);
    }
    footer li a:hover::after{ opacity:1; }
    footer li a:hover .sheen{ opacity:1; animation: sweep .9s ease; }
    footer li a:hover .scan{ opacity:.35; }
    footer li a:hover .rainbow{ animation-duration: 6.5s; filter: blur(24px) saturate(160%); }
    footer li a:hover .flux{ animation-duration: 3.2s; filter: blur(18px) saturate(230%); }
    footer li a:hover .sparks{ animation-duration: 1.6s; }

    @keyframes sweep{ from{ left:-50%; } to{ left:130%; } }

    /* Ripple (click) */
    .rip{
      position:absolute; width:10px; height:10px; border-radius:999px;
      background: radial-gradient(circle at center, rgba(255,255,255,.95), rgba(124,131,255,.3) 60%, transparent 70%);
      transform: translate(-50%, -50%) scale(0);
      pointer-events:none;
      animation: ripExpand .8s ease-out forwards;
      mix-blend-mode: screen; z-index:6;
    }
    @keyframes ripExpand{
      0%{ transform: translate(-50%, -50%) scale(0); opacity:.95; }
      70%{ transform: translate(-50%, -50%) scale(12); opacity:.4; }
      100%{ transform: translate(-50%, -50%) scale(16); opacity:0; }
    }

    /* Cursor ring */
    .cursor-ring{
      position:fixed; z-index:200; pointer-events:none;
      width:34px; height:34px; border-radius:999px;
      border:1.5px solid rgba(255,255,255,.65);
      mix-blend-mode: difference; opacity:.95;
      transform: translate(-50%, -50%) scale(1);
      transition: transform .18s ease, width .18s ease, height .18s ease, opacity .22s ease;
    }
    .cursor-ring.hide{ opacity:0; }
    .cursor-ring.grow{ width:50px; height:50px; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      .page-transition, header, footer, #content { transition: none !important; animation: none !important; }
      .cursor-ring{ display:none !important; }
    }
  </style>
</head>

<body>
  <!-- Progress bar -->
  <div class="scroll-progress" id="scrollProgress"></div>

  <!-- Radial transition overlay -->
  <div id="page-transition" class="page-transition" aria-hidden="true">
    <div class="scan"></div>
  </div>

  <!-- Header -->
  <header>
    <div class="header-links-left">
      <a href="https://www.linkedin.com/in/eugenio-macias/" target="_blank" rel="noopener" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
      <a href="mailto:eugenio_macias_orozco@brown.edu" target="_blank" rel="noopener" title="Email"><i class="fas fa-envelope"></i></a>
      <a href="{{ '/assets/files/resume_fall2025.pdf' | relative_url }}" target="_blank" rel="noopener" title="Resume"><i class="fas fa-file-alt"></i></a>
    </div>
    <h1>{{ site.title }}</h1>
    <div class="header-links-right">
      <a href="https://www.chess.com/member/eugenio_macias" target="_blank" rel="noopener" title="Chess.com"><i class="fas fa-chess"></i></a>
      <a href="https://open.spotify.com/user/eugenio.d.macias?si=3eaebf1bfa0e4e51" target="_blank" rel="noopener" title="Spotify"><i class="fab fa-spotify"></i></a>
    </div>
  </header>

  <!-- Main -->
  <main id="content">
    {{ content }}

    {% if page.title == "Home" %}
      <!-- Optional home-only extras -->
      <img src="{{ '/assets/images/gportfolio_profile_picture.png' | relative_url }}" class="profile-pic center" alt="" style="display:none;">
      <div id="math-symbols-container"></div>
    {% endif %}
  </main>

  <!-- Floating Neon Dock -->
  <footer>
    <ul id="footerNav">
      <li>
        <a href="{{ '/' | relative_url }}">
          <span class="rainbow"></span>
          <span class="flux"></span>
          <span class="sparks"></span>
          <span class="sheen"></span>
          <span class="scan"></span>
          <span class="label">Home</span>
        </a>
      </li>
      <li>
        <a href="{{ '/projects' | relative_url }}">
          <span class="rainbow"></span>
          <span class="flux"></span>
          <span class="sparks"></span>
          <span class="sheen"></span>
          <span class="scan"></span>
          <span class="label">Projects</span>
        </a>
      </li>
      <li>
        <a href="{{ '/notes' | relative_url }}">
          <span class="rainbow"></span>
          <span class="flux"></span>
          <span class="sparks"></span>
          <span class="sheen"></span>
          <span class="scan"></span>
          <span class="label">Cheat Sheets</span>
        </a>
      </li>
      <li>
        <a href="{{ '/classes-i-have-taken' | relative_url }}">
          <span class="rainbow"></span>
          <span class="flux"></span>
          <span class="sparks"></span>
          <span class="sheen"></span>
          <span class="scan"></span>
          <span class="label">Classes I Have Taken</span>
        </a>
      </li>
      <li>
        <a href="{{ '/music-repertoire' | relative_url }}">
          <span class="rainbow"></span>
          <span class="flux"></span>
          <span class="sparks"></span>
          <span class="sheen"></span>
          <span class="scan"></span>
          <span class="label">Music Repertoire</span>
        </a>
      </li>
      <li>
        <a href="{{ '/skills-interests' | relative_url }}">
          <span class="rainbow"></span>
          <span class="flux"></span>
          <span class="sparks"></span>
          <span class="sheen"></span>
          <span class="scan"></span>
          <span class="label">Skills & More</span>
        </a>
      </li>
    </ul>
  </footer>

  <!-- Cursor ring -->
  <div class="cursor-ring" id="cursor" aria-hidden="true"></div>

  <!-- Your math symbols engine -->
  <script src="{{ '/assets/js/symbols.js' | relative_url }}"></script>

  <!-- Layout JS -->
  <script>
    (function(){
      const $doc = $(document);
      const $content = $('#content');
      const $transition = $('#page-transition');
      const $progress = $('#scrollProgress');
      const cursor = document.getElementById('cursor');

      /* Reveal on load/back */
      function reveal(){ $content.addClass('visible'); }
      $(window).on('pageshow', reveal);
      $doc.ready(reveal);

      /* Scroll progress + header border */
      function onScroll(){
        const h = document.documentElement;
        const max = h.scrollHeight - h.clientHeight;
        const pct = max ? (h.scrollTop / max) * 100 : 0;
        $progress.css('width', pct + '%');
        document.body.classList.toggle('scrolled', window.scrollY > 6);
      }
      onScroll();
      window.addEventListener('scroll', onScroll, { passive:true });

      /* Magnetic hover (header icons) */
      document.querySelectorAll('header a').forEach(el=>{
        el.addEventListener('mousemove', (e)=>{
          const r = el.getBoundingClientRect();
          el.style.setProperty('--mx', (e.clientX - r.left) + 'px');
          el.style.setProperty('--my', (e.clientY - r.top) + 'px');
        }, {passive:true});
      });

      /* Prefetch on hover */
      const prefetchCache = new Set();
      function prefetch(href){
        if (!href || prefetchCache.has(href)) return;
        prefetchCache.add(href);
        const l = document.createElement('link');
        l.rel = 'prefetch'; l.href = href; document.head.appendChild(l);
      }
      document.querySelectorAll('footer a, header a, a').forEach(a=>{
        if(a.target === '_blank' || (a.getAttribute('href')||'').startsWith('mailto:')) return;
        a.addEventListener('mouseenter', ()=>prefetch(a.href), {passive:true});
      });

      /* Radial page transition + content dissolve for internal links */
      function isInternalLink(a){
        try {
          const url = new URL(a.href, window.location.href);
          return url.origin === window.location.origin;
        } catch { return false; }
      }
      function startTransition(x, y){
        $transition.css('--x', x + 'px');
        $transition.css('--y', y + 'px');
        $transition.addClass('page-transition-active');
        $content.addClass('leaving');
      }
      function endTransition(){
        $transition.removeClass('page-transition-active');
        $content.removeClass('leaving');
      }
      document.addEventListener('click', (e)=>{
        const a = e.target.closest('a');
        if(!a) return;

        if (a.target === '_blank' || a.hasAttribute('download')) return;
        const href = a.getAttribute('href') || '';
        if (href.startsWith('#') || href.startsWith('mailto:') || href.startsWith('javascript:')) return;
        if (!isInternalLink(a)) return;

        e.preventDefault();
        const x = e.clientX || (innerWidth/2);
        const y = e.clientY || (innerHeight/2);
        startTransition(x, y);
        setTimeout(()=>{ window.location.href = a.href; }, 1000);
      });
      window.addEventListener('pageshow', endTransition);

      /* Cursor ring (desktop) */
      let isTouch = false;
      window.addEventListener('touchstart', ()=>{ isTouch = true; cursor.classList.add('hide'); }, {passive:true});
      if(!isTouch){
        let x = window.innerWidth/2, y = window.innerHeight/2;
        let tx = x, ty = y;
        const speed = 0.2;
        (function loop(){
          x += (tx - x) * speed;
          y += (ty - y) * speed;
          cursor.style.transform = `translate(${x}px, ${y}px) translate(-50%, -50%)`;
          requestAnimationFrame(loop);
        })();
        window.addEventListener('mousemove', (e)=>{
          tx = e.clientX; ty = e.clientY;
          cursor.classList.remove('hide');
        }, {passive:true});
        const growSelectors = 'a, button, .cool-btn, .card, .glass';
        document.addEventListener('mouseover', e=>{
          cursor.classList.toggle('grow', !!e.target.closest(growSelectors));
        }, {passive:true});
      }

      /* Soft reveal on scroll */
      const observer = new IntersectionObserver((entries)=>{
        entries.forEach(ent=>{
          if(ent.isIntersecting){
            ent.target.style.transition = 'opacity .7s ease, transform .7s ease';
            ent.target.style.opacity = '1';
            ent.target.style.transform = 'translateY(0)';
            observer.unobserve(ent.target);
          }
        });
      }, { rootMargin: '0px 0px -10% 0px', threshold: 0.05 });
      document.querySelectorAll('section, .card, .glass').forEach(el=>{
        el.style.opacity = .0; el.style.transform = 'translateY(8px)';
        observer.observe(el);
      });

      /* Footer dock: magnetic glow, micro-tilt, ripple */
      const footerNav = document.getElementById('footerNav');
      if (footerNav){
        footerNav.querySelectorAll('a').forEach(a=>{
          a.addEventListener('mousemove', (e)=>{
            const r = a.getBoundingClientRect();
            a.style.setProperty('--mx', (e.clientX - r.left) + 'px');
            a.style.setProperty('--my', (e.clientY - r.top) + 'px');

            const dx = (e.clientX - (r.left + r.width/2)) / (r.width/2);
            const dy = (e.clientY - (r.top + r.height/2)) / (r.height/2);
            a.style.transform = `translateY(-3px) scale(1.05) rotateX(${(-dy*2).toFixed(2)}deg) rotateY(${(dx*2).toFixed(2)}deg)`;
          }, {passive:true});

          a.addEventListener('mouseleave', ()=>{ a.style.transform=''; });

          a.addEventListener('click', (e)=>{
            const rip = document.createElement('span');
            rip.className = 'rip';
            const r = a.getBoundingClientRect();
            rip.style.left = (e.clientX - r.left) + 'px';
            rip.style.top  = (e.clientY - r.top) + 'px';
            a.appendChild(rip);
            rip.addEventListener('animationend', ()=> rip.remove());
          });
        });
      }
    })();
  </script>
</body>
</html>
